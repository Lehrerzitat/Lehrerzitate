<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Lehrerzitate — Developer Reference</title>
    <style>
        :root{--bg:#0f1720;--panel:#0b1220;--accent:#4a69bd;--muted:#9aa6b2;--success:#27ae60;--danger:#e74c3c}
        *{box-sizing:border-box}
        html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial; background:var(--bg);color:#d9e2ec}
        .wrap{max-width:1100px;margin:28px auto;padding:22px;background:linear-gradient(180deg,var(--panel),#07101a);border-radius:12px;box-shadow:0 6px 30px rgba(0,0,0,0.6)}
        h1{margin:0 0 8px;color:var(--accent)}
        h2{color:#cfe3ff;margin:20px 0 8px;font-size:1.05rem}
        p{margin:8px 0;color:#c7d6e5}
        pre{background:#061421;padding:12px;border-radius:8px;color:#9ee5c4;overflow:auto}
        .muted{color:var(--muted)}
        .grid{display:grid;grid-template-columns:1fr 360px;gap:18px}
        .panel{background:#071526;padding:14px;border-radius:8px;border:1px solid rgba(255,255,255,0.02)}
        table{width:100%;border-collapse:collapse;margin-top:8px}
        td,th{padding:8px;border-bottom:1px solid rgba(255,255,255,0.03);font-size:0.92rem}
        th{color:var(--accent);text-align:left}
        ul{margin:8px 0 12px 18px}
        a{color:var(--accent)}
        .ok{color:var(--success)}
        code{background:#061421;padding:2px 6px;border-radius:6px;color:#9fe}
        .cmd{display:inline-block;padding:8px 10px;border-radius:8px;background:#021520;color:#9fe;font-weight:700}
        footer{margin-top:18px;color:var(--muted);font-size:0.86rem}
    </style>
</head>
<body>
    <div class="wrap">
        <h1>Lehrerzitate — Developer Reference</h1>
        <p class="muted">Kompakter QuickStart + Übersicht über Struktur & Verantwortlichkeiten. Ziel: Neuer Entwickler versteht Projekt in 5–10 Minuten.</p>

        <h2>QuickStart (sehr kompakt)</h2>
        <div class="grid">
            <div>
                <p>1) Lokalen Webserver starten (Windows):</p>
                <pre class="cmd">cd Frontend/html
python -m http.server 8000</pre>
                <p>2) Öffne <a href="http://localhost:8000">http://localhost:8000</a> im Browser.</p>
                <p>3) Browser‑Console (F12) offen halten — viele Aktionen loggen sich selbst.</p>

                <h2>Schnelle Orientierung</h2>
                <p class="muted">Wichtigste Orte im Repo:</p>
                <ul>
                    <li><code>html/index.html</code> — Hauptseite & Tab‑Container</li>
                    <li><code>html/header.html</code>, <code>html/footer.html</code> — geladene Komponenten (loader.js)</li>
                    <li><code>css/style.css</code> — globale Stile & Variablen (Akzentfarben, Dark Mode)</li>
                    <li><code>js/app.js</code> — App‑Initialisierung, Tab‑Routing, Theme‑Glue</li>
                    <li><code>js/ui.js</code> — Rendering (Quote‑Cards, Seiten) und DOM‑Hilfsfunktionen</li>
                    <li><code>js/search.js</code> — Such‑/Filter‑/Sort‑Logik</li>
                    <li><code>js/votes.js</code> — Voting (optimistische UI) & localStorage persistence</li>
                    <li><code>js/utils.js</code> — kleine Helper (debounce, escapeHtml, shuffle, ...)</li>
                </ul>

                <h2>Wie die Seite geladen wird</h2>
                <ol>
                    <li><code>index.html</code> lädt <code>loader.js</code>, welches <code>header.html</code> & <code>footer.html</code> per fetch einfügt.</li>
                    <li>Skripte werden in dieser Reihenfolge eingebunden: <code>utils.js</code> → <code>ui.js</code> → <code>votes.js</code> → <code>search.js</code> → <code>app.js</code>.</li>
                    <li><code>app.js</code> wartet auf ein Ereignis <code>componentsLoaded</code>, dann ruft <code>initApp()</code> auf.</li>
                </ol>

                <h2>Run / Dev Tipps</h2>
                <ul>
                    <li>Wenn du HTML Komponenten änderst: Loader cached nicht — aktualisiere die Seite.</li>
                    <li>Nutze <code>console.log</code> in den zentralen Funktionen (<code>initApp</code>, <code>loadQuotes</code>, <code>toggleVote</code>) zum Debuggen.</li>
                    <li>Bei CSS‑Änderungen manchmal Hard‑Reload nötig (Ctrl+F5).</li>
                </ul>

            </div>

            <aside class="panel">
                <h3>Project Layout</h3>
                <pre>Frontend/
  html/
    index.html
    header.html
    footer.html
  css/
    style.css
  js/
    loader.js
    utils.js
    ui.js
    votes.js
    search.js
    app.js
    submit.js
</pre>
                <p class="muted">(Weitere Dateien: game UI, privacy/imprint pages existieren in <code>html/</code>.)</p>
            </aside>
        </div>

        <h2>Modul‑Verantwortlichkeiten (Kurz & Präzise)</h2>
        <div class="panel">
            <table>
                <tr><th>Datei</th><th>Aufgabe / Überblick</th></tr>
                <tr><td><code>js/loader.js</code></td><td>Lädt header/footer per fetch und feuert Event <code>componentsLoaded</code>. Änderungen an Header/Footer wirken auf alle Seiten.</td></tr>
                <tr><td><code>js/utils.js</code></td><td>Allgemeine Helfer: <code>debounce</code>, <code>escapeHtml</code>, <code>escapeRegex</code>, <code>shuffleArray</code>, <code>pickRandom</code>, <code>adjustBrightness</code>. Keine DOM‑Manipulation hier.</td></tr>
                <tr><td><code>js/ui.js</code></td><td>Rendering: <code>createQuoteCard()</code>, <code>renderQuotes()</code>, <code>renderForYouPage()</code>. Verantwortlich für HTML‑Erzeugung und einfache DOM‑Einfügungen.</td></tr>
                <tr><td><code>js/search.js</code></td><td>Such‑ und Filterlogik: separates Teacher/Subject/Quote Inputs, Regex‑based quote search, ruft <code>renderQuotes()</code> nach Filterung auf.</td></tr>
                <tr><td><code>js/votes.js</code></td><td>Voting: optimistische UI Updates, Toggle‑Logik, Speichern/Lesen von Votes in <code>localStorage</code>. Kann später durch API‑Aufrufe ersetzt werden.</td></tr>
                <tr><td><code>js/app.js</code></td><td>Glue‑Code: App‑Start, Tab/Hash‑Routing, Theme & Accent Color Handling (setzt CSS‑Variablen), initialisiert Event Listener und Module.</td></tr>
                <tr><td><code>js/submit.js</code></td><td>Formular‑Validierung & Senden. Aktuell lokal (Dummy), vorgesehen für Backend‑Integration.</td></tr>
            </table>
        </div>

        <h2>Wichtige Flows & wo anzupassen</h2>
        <div class="panel">
            <h3>Quotes laden</h3>
            <p><code>app.js</code> enthält momentan Dummy‑Daten in <code>dummyQuotes</code>. Für echtes Backend ersetze die Stelle in <code>loadQuotes()</code> mit <code>fetch('/api/quotes')</code> und mappe das Resultat auf das interne Format (id, text, teacher, subject, upvotes, downvotes, date, userVote).</p>

            <h3>Voting</h3>
            <p>Die Funktionalität ist in <code>js/votes.js</code>. Aktuell wird lokal gespeichert mit <code>localStorage.userVotes</code>. Ersetze intern die Stelle in <code>toggleVote()</code> oder erweitere sie, um API‑Aufrufe zu machen und serverseitige Persistenz zu erhalten.</p>

            <h3>Search & Sort</h3>
            <p>Suchlogik in <code>js/search.js</code>. Filterung ist case‑insensitive; Zitat‑Suche verwendet Wortgrenzen (RegExp mit <code>\b</code>). Sortierung geschieht in <code>sortQuotes()</code> (in app.js).</p>

            <h3>Theme & Farben</h3>
            <p>Akzentfarbe wird in <code>app.js</code> durch <code>applyAccentColor()</code> gesetzt — sie verändert CSS‑Variablen <code>--primary-color</code> und <code>--primary-dark</code>. Dark mode wird über <code>data-theme="dark"</code> am <code>html</code>-Element gesteuert.</p>
        </div>

        <h2>Backend Integrations‑Map (wo was anpassen)</h2>
        <div class="panel">
            <table>
                <tr><th>Frontend</th><th>Backend Endpoint (Empfohlen)</th><th>Was zu tun ist</th></tr>
                <tr><td><code>loadQuotes()</code> (app.js)</td><td><code>GET /api/quotes</code></td><td>Return JSON array of quotes. Map to internal shape.</td></tr>
                <tr><td><code>toggleVote()</code> (votes.js/app.js)</td><td><code>POST /api/quotes/{id}/vote</code></td><td>Senden: { userId, vote: 'up'|'down'|null } → Update counts and reply with new counts.</td></tr>
                <tr><td><code>submitQuote()</code> (submit.js)</td><td><code>POST /api/quotes</code></td><td>Send new quote object, server returns saved object with id/date.</td></tr>
            </table>
            <p class="muted">Backend muss Auth/Rate‑Limit beachten; UI erwartet fast Antworten — verwende optimistic UI und fallback auf server‑Antwort.</p>
        </div>

        <h2>Testing & Debugging</h2>
        <div class="panel">
            <ul>
                <li>Check Console Logs: initApp(), loadQuotes(), toggleVote(), applyAccentColor()</li>
                <li>LocalStorage: <code>localStorage.userVotes</code> und <code>localStorage.accentColor</code></li>
                <li>Devices: Teste Mobile (touch) wegen voting focus quirks (pointerdown handling ist implementiert)</li>
                <li>Run quick server with Python or any static server</li>
            </ul>
        </div>

        <h2>Common Tasks (How‑tos)</h2>
        <div class="panel">
            <h3>1) Neue Akzentfarbe hinzufügen</h3>
            <ol>
                <li>Füge Hex in <code>settings.html</code> / color picker hinzu.</li>
                <li>Stelle sicher, dass <code>settings.js</code> die neue Farbe in <code>localStorage</code> speichert.</li>
                <li>Default kann in <code>css/style.css :root</code> gesetzt werden.</li>
            </ol>

            <h3>2) Neues Feld zu Quotes (z. B. school)</h3>
            <ol>
                <li>Backend: API liefert neues Feld.</li>
                <li>Frontend: mappe es in <code>loadQuotes()</code> und erweitere <code>createQuoteCard()</code> (ui.js) um Anzeige.</li>
                <li>Option: aktualisiere Search (search.js) wenn filterbar.</li>
            </ol>
        </div>

        <footer>
            Stand: 13.12.2025 — Für schnelle Fragen: öffne die Console, such nach '✓' oder 'Fehler' Logs. Bei größeren Refactors: bitte Tests / smoke checks lokal ausführen.
        </footer>
    </div>
</body>
</html>